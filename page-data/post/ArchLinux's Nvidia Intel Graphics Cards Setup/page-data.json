{"componentChunkName":"component---src-components-post-jsx","path":"/post/ArchLinux's Nvidia Intel Graphics Cards Setup","result":{"data":{"markdownRemark":{"id":"583fe943-bb1b-51a1-864a-de58642f9a0a","frontmatter":{"date":"March 22, 2019","draft":null,"tags":["linux"],"title":"ArchLinux's Nvidia Intel Graphics Cards Setup"},"html":"<h2>附加</h2>\n<p>现在似乎不用 optimus-manager 也可以，如果直接安装 nvidia 和 gnome 的话，猜测是 gnome 对 xorg.conf 进行了配置？而且在 Wayland 下也能正常工作，但是需要安装整个 gnome group。</p>\n<p>记得上次没有装全，X11 一直启动失败，然后装了 <code class=\"language-text\">optimus-manager</code></p>\n<p>参考 <code class=\"language-text\">optimus-manager</code> 在 github 上的 wiki：</p>\n<ul>\n<li>改成 Xorg 模式， 因为据说 Wayland 不支持？</li>\n<li>把 gdm 换成一个打了补丁的 <code class=\"language-text\">gdm-prime</code> Aur 包， 才得以正常使用 gnome (真是麻烦啊…</li>\n</ul>\n<h2>起因</h2>\n<p>marjaro deepin 崩了</p>\n<p>因为 <code class=\"language-text\">optimus-manager</code> 这个工具让我对驱动显卡有了信心所以就换成了 archlinux</p>\n<p>arch 折腾好多次了 但是每次到最后总是 nvidia 驱动不了，但是我又不想放弃双屏 …</p>\n<h2>Procedure</h2>\n<p>首先需要先有 <code class=\"language-text\">nvidia</code> 的驱动</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> pacman -Sy\n<span class=\"token function\">sudo</span> pacman -S nvidia</code></pre></div>\n<p>安装 optimus-manager.git Aur 包</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">git</span> clone https://aur.tuna.tsinghua.edu.cn/optimus-manager.git\n<span class=\"token builtin class-name\">cd</span> optimus-manager\nmakepkg -si</code></pre></div>\n<p>或者使用 yay</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">git</span> clone https://aur.tuna.tsinghua.edu.cn/yay.git\n<span class=\"token builtin class-name\">cd</span> yay\nmakepkg -si</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">yay -S optimus-manager</code></pre></div>\n<p>使用 tuna 的 aur 镜像</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">yay --save --aururl <span class=\"token string\">\"https://aur.tuna.tsinghua.edu.cn\"</span> optimus-manager</code></pre></div>\n<p>--save 参数可以把镜像的配置保存下来，以后就会默认使用镜像了。</p>\n<p>yay 如果在用镜像的同时使用了全局代理的话，会出现奇怪的网络问题，把代理暂时关掉就好了。</p>\n<p>然后开启 <code class=\"language-text\">optimus-manager</code> 的服务</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> systemctl <span class=\"token builtin class-name\">enable</span> --now optimus-manager</code></pre></div>\n<p>设置 mode</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">optimus-manager --set-startup nvidia</code></pre></div>\n<p>重启</p>"}},"pageContext":{"id":"583fe943-bb1b-51a1-864a-de58642f9a0a"}},"staticQueryHashes":[]}